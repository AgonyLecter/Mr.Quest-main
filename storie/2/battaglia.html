<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      background-color: #000;
      font-family: 'Arial', sans-serif;
      color: #f7de04;
    }

    .game-container {
      text-align: center;
    }

    .enemy-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 50px;
      background-image: url('enemy.png');
      background-size: cover;
      background-position: center;
      width: 300px;
      height: 200px;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.4);
    }
.enemy-content {
  position: relative; /* Aggiungi questa linea */
  z-index: 2; /* Aggiungi questa linea */
}

    .enemy-title {
      font-family: 'Cinzel', serif;
      font-size: 28px;
      color: #ff6600;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.4);
      margin-bottom: 10px;
    }

    .dual-dice {
      display: flex;
      justify-content: space-around;
      align-items: center;
      margin-top: 20px;
    }

    .dice {
      width: 150px;
      height: 150px;
      perspective: 1000px;
      margin: 0;
    }

    .dice-inner {
      width: 100%;
      height: 100%;
      transform-style: preserve-3d;
    }

    .dice-number {
      display: block;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 36px;
      font-weight: bold;
      color: #04eeff;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.4);
    }

    .roll-button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 16px;
      background-color: #4CAF50;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.3s ease-in-out;
      box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
    }

    .roll-button:disabled {
      background-color: #999;
      cursor: not-allowed;
    }

    .health-bar {
      width: 300px;
      height: 10px;
      margin-top: 10px;
      background-color: red;
      position: relative;
      display: inline-block;
    }

    .health {
      height: 100%;
      background-color: green;
      transition: width 0.3s ease-in-out;
    }

    .combat-result {
      font-size: 24px;
      font-weight: bold;
      color: #4CAF50;
      margin-top: 20px;
    }

    .player-container {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    @keyframes rollDice {
      0% {
        transform: rotateX(0deg) rotateY(0deg);
      }
      20% {
        transform: rotateX(-90deg) rotateY(180deg);
      }
      40% {
        transform: rotateX(-180deg) rotateY(0deg);
      }
      60% {
        transform: rotateX(90deg) rotateY(-180deg);
      }
      80% {
        transform: rotateX(0deg) rotateY(0deg);
      }
      100% {
        transform: rotateX(0deg) rotateY(0deg);
      }
    }
    .enemy-attacking {
      animation: enemyAttack 1s forwards;
    }

    @keyframes enemyAttack {
      0% {
        transform: translateX(0);
      }
      100% {
        transform: translateX(200px); /* o qualsiasi altra quantit√† per muovere la barra */
      }
    }
  </style>
  <link href="https://fonts.googleapis.com/css?family=Cinzel&display=swap" rel="stylesheet">
</head>
<body>
  <div class="game-container">
    <div class="enemy-container">
      <p class="enemy-title">I GUARDIANI DELLA DIMORA</p>
      <div class="enemy-content">
        <div class="health-bar" id="enemy-health-bar">
          <div class="health" id="enemy-health"></div>
        </div>
        <p class="combat-result" id="enemy-combat-result"></p>
      </div>    
      <div class="player-container">
        <p>TU</p>
        <div class="health-bar" id="player-health-bar">
          <div class="health" id="player-health"></div>
        </div>
        <div class="dual-dice">
          <div class="dice" id="dice1">
            <div class="dice-inner" id="dice-inner1">
              <span class="dice-number" id="dice-number1">-</span>
            </div>
          </div>
          <div class="dice" id="dice2">
            <div class="dice-inner" id="dice-inner2">
              <span class="dice-number" id="dice-number2">-</span>
            </div>
          </div>
        </div>
        <button id="roll-button" class="roll-button">Combatti</button>
        <button id="restart-button" class="roll-button" style="display: none;">Rigioca</button>
        <button id="next-button" class="roll-button" style="display: none;">Avanti</button>
        <p class="combat-result" id="combat-result"></p>
      </div>
  </div>
  <audio id="roll-sound" src="roll-sound.mp3"></audio>
  <script>
    // Variabili globali
    const rollButton = document.getElementById('roll-button');
  const diceNumber1 = document.getElementById('dice-number1');
  const diceNumber2 = document.getElementById('dice-number2');
  const diceInner1 = document.getElementById('dice-inner1');
  const diceInner2 = document.getElementById('dice-inner2');
  const rollSound = document.getElementById('roll-sound');
  const combatResult = document.getElementById('combat-result');
  const enemyCombatResult = document.getElementById('enemy-combat-result');
  const playerHealthBar = document.getElementById('player-health-bar');
  const playerHealth = document.getElementById('player-health');
  const enemyHealthBar = document.getElementById('enemy-health-bar');
  const enemyHealth = document.getElementById('enemy-health');
  const restartButton = document.getElementById('restart-button'); // Aggiunto questo
  const nextButton = document.getElementById('next-button'); // Aggiunto questo

    let playerHP = 120;
    let enemyHP = 120;
    let playerTurn = true;

    // Frasi di dialogo tra il nemico e il giocatore
    const enemyDialogues = [
      "Maledetti come siete fuggiti?",
      "Veramente pensate di batterci?",
      "UHAUHAUHAUHA non fateci ridere",
      "Ormai non avete scampo!",
    ];

    const playerDialogues = [
      "Dobbiamo combattere!!",
      "Non riuscirai ad ucciderci!",
      "Useremo tutta la nostra forza!",
      "Preparati a morire!",
    ];

    // Funzione per ottenere un dialogo casuale
    function getRandomDialogue(dialogues) {
      const randomIndex = Math.floor(Math.random() * dialogues.length);
      return dialogues[randomIndex];
    }

    // Funzione per aggiornare il risultato del combattimento del giocatore
    function updateCombatResult(message) {
      combatResult.textContent = message;
    }

    // Funzione per aggiornare il risultato del combattimento del nemico
    function updateEnemyCombatResult(message) {
      enemyCombatResult.textContent = message;
    }

    // Funzione per lanciare i dadi
    function rollDice() {
      rollButton.disabled = true;
      const randomResult1 = getRandomNumber(1, 9);
      const randomResult2 = getRandomNumber(1, 9);

      diceNumber1.textContent = randomResult1;
      diceNumber2.textContent = randomResult2;

      diceInner1.style.animation = 'rollDice 2s cubic-bezier(0.18, 0.89, 0.32, 1.28)';
      diceInner2.style.animation = 'rollDice 2s cubic-bezier(0.18, 0.89, 0.32, 1.28)';

      rollSound.currentTime = 0;
      rollSound.play();

      setTimeout(() => {
        diceInner1.style.animation = '';
        diceInner2.style.animation = '';

        if (playerTurn) {
          performPlayerAttack(randomResult1 + randomResult2);
        } else {
          performEnemyAttack(randomResult1 + randomResult2);
        }

        if (playerHP <= 0 || enemyHP <= 0) {
          rollButton.disabled = true;
        } else {
          rollButton.disabled = false;
        }
      }, 1000);
    }

    // Funzione per l'attacco del giocatore
    function performPlayerAttack(playerRoll) {
      if (getRandomNumber(1, 100) <= 10) {
        playerRoll *= 2; // Colpo critico!
      }

      const enemyDamage = playerRoll;
      enemyHP -= enemyDamage;

      if (enemyHP < 0) {
        enemyHP = 0;
        updateCombatResult('Hai vinto! Hai sconfitto i Guardiani.');
        rollButton.disabled = true;
        nextButton.style.display = 'block'; // Mostra il pulsante "Avanti"
        } else {
      }

      updateHealthBars();
      updateEnemyCombatResult(`Hai inflitto ${enemyDamage} danno ai Guardiani.`);
      playerTurn = false;

      if (enemyHP <= 0) {
        updateCombatResult('Hai vinto! Hai sconfitto i Guardiani.');
        rollButton.disabled = true;
      } else {
        updateCombatResult("Turno dei Guardiani.");
        setTimeout(() => {
          updateEnemyCombatResult(getRandomDialogue(enemyDialogues));
          rollButton.disabled = false;
        }, 1000);
      }
    }

    // Funzione per l'attacco del nemico
    function performEnemyAttack(enemyRoll) {
      if (getRandomNumber(1, 100) <= 10) {
        enemyRoll *= 2; // Colpo critico!
      }

      const playerDamage = enemyRoll;
      playerHP -= playerDamage;

      if (playerHP < 0) {
        playerHP = 0;
        updateEnemyCombatResult('Hai perso! I Guardiani vincono.');
        rollButton.disabled = true;
        restartButton.style.display = 'block'; // Mostra il pulsante "Rigioca"
        } else {
      }

      updateHealthBars();
      updateCombatResult(`Hai subito ${playerDamage} danno.`);
      playerTurn = true;

      if (playerHP <= 0) {
        updateEnemyCombatResult('Hai perso! I Guardiani vincono.');
      } else {
        updateEnemyCombatResult("Tocca a te!");
        updateCombatResult(getRandomDialogue(playerDialogues));
        rollButton.disabled = false;
      }
    }

    // Funzione per aggiornare le barre della salute
    function updateHealthBars() {
      const playerHealthPercentage = (playerHP / 120) * 100;
      const enemyHealthPercentage = (enemyHP / 120) * 100;

      playerHealth.style.width = `${playerHealthPercentage}%`;
      enemyHealth.style.width = `${enemyHealthPercentage}%`;
    }

    // Event listener per il click del pulsante "Combatti"
    rollButton.addEventListener('click', rollDice);

    // Funzione per ottenere un numero casuale tra un minimo e un massimo dato
    function getRandomNumber(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }
    restartButton.addEventListener('click', function() {
  playerHP = 120;
  enemyHP = 120;
  updateHealthBars();
  combatResult.textContent = '';
  enemyCombatResult.textContent = '';
  rollButton.disabled = false;
  restartButton.style.display = 'none';
  nextButton.style.display = 'none';
});

nextButton.addEventListener('click', function() {
  window.location.href = 'uccisione.html'; // Reindirizza alla pagina successiva
});
  </script>
</body>
</html>



